{% extends "components/_main.jinja" %}

{% block title %}Newsletter Subscribers{% endblock %}

{% block main %}
<div class="card">
	<h2>Newsletter Subscribers</h2>
	<p class="muted">Manage newsletter subscriptions.</p>
	
	<div style="margin:1.5rem 0;">
		<a class="button" href="{{ url_for('admin.dashboard') }}">‚Üê Back to Dashboard</a>
	</div>

	{% if subscribers %}
	<div style="margin-top:2rem;">
		<h3 style="font-size:1.1rem;margin-bottom:1rem;">Total Subscribers: {{ subscribers|length }}</h3>
		<div style="overflow-x:auto;">
			<table style="width:100%;border-collapse:collapse;">
				<thead>
					<tr style="border-bottom:2px solid var(--card-border);">
						<th style="text-align:left;padding:0.75rem;color:var(--cyan);">Email</th>
						<th style="text-align:center;padding:0.75rem;color:var(--cyan);">Subscribed Date</th>
						<th style="text-align:center;padding:0.75rem;color:var(--cyan);">Status</th>
						<th style="text-align:center;padding:0.75rem;color:var(--cyan);">Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for subscriber in subscribers %}
					<tr style="border-bottom:1px solid var(--card-border);">
						<td style="padding:0.75rem;">{{ subscriber.email }}</td>
						<td style="text-align:center;padding:0.75rem;">
							{{ subscriber.subscribed_at.strftime('%B %d, %Y') }}
						</td>
						<td style="text-align:center;padding:0.75rem;">
							{% if subscriber.is_active %}
								<span style="color:var(--cyan);font-size:0.85rem;padding:0.25rem 0.65rem;background:rgba(6,182,212,0.15);border-radius:4px;border:1px solid var(--cyan);">Active</span>
							{% else %}
								<span style="color:var(--muted);font-size:0.85rem;padding:0.25rem 0.65rem;background:rgba(160,174,192,0.1);border-radius:4px;border:1px solid var(--muted);">Inactive</span>
							{% endif %}
						</td>
						<td style="text-align:center;padding:0.75rem;">
							<form method="POST" action="{{ url_for('admin.delete_subscriber', subscriber_id=subscriber.id) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to remove &quot;{{ subscriber.email }}&quot; from the newsletter?');">
								<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
								<button type="submit" style="background:none;border:none;color:#ef4444;font-size:0.9rem;cursor:pointer;padding:0;font-family:inherit;text-decoration:none;transition:color 0.3s ease;" onmouseover="this.style.color='#fca5a5'" onmouseout="this.style.color='#ef4444'">Remove</button>
							</form>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	{% else %}
	<p class="muted" style="margin-top:1rem;">No subscribers yet.</p>
	{% endif %}
</div>
{% endblock %}
